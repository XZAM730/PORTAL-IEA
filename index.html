<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>IEA PORTAL RESMI</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Orbitron:wght@500;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
      :root{
        --bg: #020205; /* Background lebih gelap */
        --accent: #00f6ff;
        --accent-danger: #ff2a2a;
        --accent-success: #0aff0a;
        --glass: rgba(20, 20, 30, 0.7); /* Sedikit lebih gelap */
        --glass-border: rgba(0, 246, 255, 0.3);
        --dock-bg: rgba(10, 10, 15, 0.95);
      }

      /* BASE */
      *{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
      body{
        background-color: var(--bg);
        font-family: 'Inter', sans-serif;
        color: #fff; overflow-x: hidden;
        min-height: 100vh;
        
        /* BACKGROUND KACA PECAH BERSINAR (STATIS) */
        background-image:
            /* Glow Pusat */
            radial-gradient(circle at 50% 30%, rgba(0, 246, 255, 0.15), transparent 50%),
            /* Garis Retakan 1 */
            repeating-linear-gradient(45deg, rgba(255,255,255,0.02) 0px, rgba(255,255,255,0.02) 1px, transparent 1px, transparent 60px),
            /* Garis Retakan 2 */
            repeating-linear-gradient(-60deg, rgba(255,255,255,0.02) 0px, rgba(255,255,255,0.02) 1px, transparent 1px, transparent 90px),
            /* Dasar Gelap */
            linear-gradient(to bottom, #020205, #000);
        background-attachment: fixed; /* Agar background tetap saat scroll */
        background-size: cover;
      }

      /* WRAPPER */
      .wrap{
        max-width: 1000px; margin: 0 auto; 
        padding: 100px 20px 140px 20px;
        position: relative; z-index: 2;
        animation: fadeIn 1s ease-out;
      }
      @keyframes fadeIn { from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);} }

      /* HEADER */
      header{ text-align: center; margin-bottom: 50px; }
      header h1{
        font-family: 'Orbitron'; font-size: clamp(2rem, 6vw, 3.5rem);
        background: linear-gradient(180deg, #fff, #aaa);
        -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        letter-spacing: 2px; text-shadow: 0 0 20px rgba(0, 246, 255, 0.3);
      }
      .security-badge {
        display: inline-block; padding: 5px 15px; border: 1px solid var(--accent);
        color: var(--accent); font-family: 'JetBrains Mono'; font-size: 0.7rem;
        border-radius: 4px; margin-bottom: 15px; background: rgba(0,246,255,0.1);
        box-shadow: 0 0 15px rgba(0,246,255,0.2);
      }

      /* GRID CARDS */
      .grid{ display: grid; grid-template-columns: 1fr; gap: 20px; perspective: 1000px; }
      @media(min-width: 768px){ .grid{ grid-template-columns: repeat(2, 1fr); } }

      .card{
        background: var(--glass);
        border: 1px solid rgba(255,255,255,0.1);
        border-radius: 16px; padding: 25px;
        position: relative; overflow: hidden;
        backdrop-filter: blur(20px); transition: 0.3s;
        cursor: pointer; transform-style: preserve-3d;
        box-shadow: 0 5px 20px rgba(0,0,0,0.3); /* Tambah shadow biar kontras sama background baru */
      }
      .card:hover{
        transform: translateY(-5px);
        border-color: var(--accent);
        box-shadow: 0 10px 40px rgba(0, 246, 255, 0.2);
      }
      .card span{
        font-family: 'JetBrains Mono'; font-size: 0.65rem; color: var(--accent);
        display: block; margin-bottom: 10px; letter-spacing: 2px;
      }
      .card h2{
        font-family: 'Orbitron'; font-size: 1.3rem; margin-bottom: 8px; color: #fff;
      }
      .card p{ font-size: 0.9rem; color: rgba(255,255,255,0.7); line-height: 1.5; }
      
      .lock-icon {
        position: absolute; top: 20px; right: 20px; width: 20px; height: 20px;
        fill: rgba(255,255,255,0.3); transition: 0.3s;
      }
      .card:hover .lock-icon { fill: var(--accent); }

      /* NAVIGATION DOCK (FIXED Z-INDEX) */
      .dock-container{
        position: fixed; bottom: 20px; left: 0; width: 100%;
        display: flex; justify-content: center; z-index: 9000; 
        pointer-events: none;
      }
      .dock{
        background: var(--dock-bg); border: 1px solid var(--glass-border);
        backdrop-filter: blur(20px); padding: 10px 20px; border-radius: 20px;
        display: flex; gap: 20px; pointer-events: auto;
        box-shadow: 0 10px 40px rgba(0,0,0,0.8);
      }
      .dock-btn{
        background: transparent; border: none; cursor: pointer;
        color: rgba(255,255,255,0.6); display: flex; flex-direction: column; 
        align-items: center; gap: 4px; transition: 0.3s; padding: 5px;
      }
      .dock-btn svg{ width: 22px; height: 22px; fill: currentColor; }
      .dock-btn span{ font-size: 0.6rem; font-family: 'Orbitron'; }
      .dock-btn:hover{ color: #fff; transform: translateY(-2px); }
      .dock-btn.admin { color: var(--accent); }

      /* === MODAL SYSTEM === */
      .modal {
        position: fixed; inset: 0; background: rgba(0,0,0,0.95);
        z-index: 10000; 
        display: none; justify-content: center; align-items: center; 
        padding: 20px;
        backdrop-filter: blur(15px);
      }
      .modal-content {
        width: 100%; max-width: 450px; background: #0a0a10;
        border: 1px solid var(--accent); border-radius: 20px;
        padding: 30px; text-align: center; position: relative;
        box-shadow: 0 0 50px rgba(0, 246, 255, 0.15);
        animation: zoomIn 0.3s ease;
      }
      @keyframes zoomIn { from{transform:scale(0.9);opacity:0} to{transform:scale(1);opacity:1} }

      /* SCANNER STYLE */
      .scanner-frame {
        width: 100%; height: 200px; border: 2px dashed rgba(255,255,255,0.2);
        border-radius: 10px; margin: 20px 0; position: relative;
        background: rgba(0,0,0,0.5); overflow: hidden;
        display: flex; align-items: center; justify-content: center;
      }
      .scanner-frame.active { border-color: var(--accent); border-style: solid; }
      
      .scan-laser {
        position: absolute; top: 0; left: 0; width: 100%; height: 2px;
        background: var(--accent); box-shadow: 0 0 15px var(--accent);
        animation: scanMove 2s infinite linear; display: none; z-index: 5;
      }
      @keyframes scanMove { 0%{top:0} 50%{top:100%} 100%{top:0} }

      .preview-img { max-width: 100%; max-height: 100%; display: none; object-fit: contain; }
      
      .upload-btn-wrapper { position: relative; overflow: hidden; display: inline-block; width: 100%; }
      .btn-upload {
        border: 1px solid var(--accent); color: var(--accent); background: transparent;
        padding: 12px; border-radius: 8px; width: 100%; font-family: 'Orbitron';
        cursor: pointer; font-size: 0.8rem; letter-spacing: 1px; transition: 0.3s;
      }
      .upload-btn-wrapper input[type=file] { font-size: 100px; position: absolute; left: 0; top: 0; opacity: 0; cursor: pointer; }

      .input-field {
        width: 100%; padding: 15px; background: #151520; border: 1px solid #333;
        color: #fff; margin-top: 15px; border-radius: 8px; text-align: center;
        font-family: 'JetBrains Mono';
      }
      
      .btn-verify {
        width: 100%; padding: 15px; background: #333; color: #777;
        font-weight: bold; border: none; border-radius: 8px; margin-top: 15px;
        cursor: not-allowed; font-family: 'Orbitron'; transition: 0.3s;
      }
      .btn-verify.ready {
        background: var(--accent); color: #000; cursor: pointer;
        box-shadow: 0 0 20px rgba(0, 246, 255, 0.4);
      }

      /* LOADER GLOBAL */
      #global-loader {
        position: fixed; inset: 0; background: #000; z-index: 20000; 
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        transition: opacity 0.5s; pointer-events: none;
      }
      .loader-text { font-family: 'JetBrains Mono'; color: var(--accent); margin-top: 15px; letter-spacing: 3px; }
      .spinner {
        width: 50px; height: 50px; border: 3px solid rgba(255,255,255,0.1);
        border-top-color: var(--accent); border-radius: 50%; animation: spin 0.8s linear infinite;
      }
      @keyframes spin { 100%{transform:rotate(360deg)} }

    </style>
</head>
<body>

  <div id="global-loader">
    <div class="spinner"></div>
    <div class="loader-text" id="loaderMsg">SYSTEM LOADING...</div>
  </div>

  <div class="wrap" id="mainWrap">
    <header>
      <div class="security-badge">INTERNATIONAL EDUCATION ASTRONOMY</div>
      <h1>IEA PORTAL</h1>
    </header>

    <div class="grid">
      
      <div class="card" onclick="goto('https://whatsapp.com/channel/0029Vb7X7CIHFxPAYUFhN01q')">
        <span>OFFICIAL FEED</span>
        <h2>SALURAN IEA</h2>
        <p>Bergabung dengan saluran WhatsApp resmi untuk informasi real-time.</p>
      </div>

      <div class="card" onclick="goto('https://xzam730.github.io/PENDAFTARAN-KOMUNITAS-1/')">
        <span>PUBLIC GATE</span>
        <h2>KOMUNITAS 1</h2>
        <p>Pendaftaran gelombang pertama member IEA.</p>
      </div>

      <div class="card" onclick="goto('https://xzam730.github.io/PENDAFTARAN-KOMUNITAS-1/komunitas2.html')">
        <span>EXPANSION</span>
        <h2>KOMUNITAS 2</h2>
        <p>Pendaftaran gelombang kedua member baru IEA.</p>
      </div>

      <div class="card" onclick="openScanner('https://xzam730.github.io/IEA-Web-premium/')">
        <svg class="lock-icon" viewBox="0 0 24 24"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H8.9V6zM18 20H6V10h12v10z"/></svg>
        <span>RESTRICTED AREA</span>
        <h2>WEBSITE IEA</h2>
        <p>Database Pusat. Wajib Scan ID Card.</p>
      </div>

      <div class="card" onclick="openScanner('https://ai-iea-international-education-astronomy-tvmchu4pnij7avslkygup.streamlit.app/')">
        <svg class="lock-icon" viewBox="0 0 24 24"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H8.9V6zM18 20H6V10h12v10z"/></svg>
        <span>INTELLIGENCE</span>
        <h2>AI IEA</h2>
        <p>Terminal Cerdas. Wajib Scan ID Card.</p>
      </div>

      <div class="card" onclick="openModal('rulesModal')">
        <span>COMMUNITY</span>
        <h2>DISCORD HUB</h2>
        <p>Diskusi Real-time. Baca aturan sebelum bergabung.</p>
      </div>

    </div>
  </div>

  <div class="dock-container">
    <div class="dock">
      <button class="dock-btn" onclick="location.reload()">
        <svg viewBox="0 0 24 24"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
        <span>RELOAD</span>
      </button>

      <button class="dock-btn admin" onclick="contactAdmin()">
        <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12zM7 9h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2z"/></svg>
        <span>ADMIN</span>
      </button>

      <button class="dock-btn" onclick="openModal('rulesModal')">
        <svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
        <span>RULES</span>
      </button>
    </div>
  </div>

  <div id="scanModal" class="modal">
    <div class="modal-content">
      <h3 style="color:var(--accent)">SECURITY CLEARANCE</h3>
      <p style="font-size:0.8rem; color:#888; margin-bottom:15px;">UPLOAD ID CARD UNTUK VERIFIKASI</p>
      
      <div class="scanner-frame" id="scannerFrame">
        <div class="scan-laser" id="scanLaser"></div>
        <img id="previewImg" class="preview-img" alt="ID Preview">
        <div id="scanPlaceholder" style="color:#555; font-size:0.8rem;">NO IMAGE DETECTED</div>
      </div>

      <div class="upload-btn-wrapper">
        <button class="btn-upload">UPLOAD / SCAN ID CARD</button>
        <input type="file" id="idCardInput" accept="image/*" onchange="handleImageUpload(event)">
      </div>

      <input type="text" id="scanName" class="input-field" placeholder="NAMA LENGKAP (SESUAI ID)" disabled>
      
      <button id="verifyBtn" class="btn-verify" onclick="processVerification()">VERIFY ACCESS</button>
      
      <div onclick="closeModal('scanModal')" style="margin-top:20px; color:#666; font-size:0.75rem; cursor:pointer;">ABORT</div>
    </div>
  </div>

  <div id="rulesModal" class="modal">
    <div class="modal-content">
      <h3 style="color:#fff;">PROTOCOLS</h3>
      <div style="text-align:left; font-size:0.9rem; line-height:1.6; color:#ccc; margin-bottom:20px;">
        1. Etika adalah prioritas.<br>
        2. Data wajib berbasis sains.<br>
        3. No Spam / Politik.<br>
        4. Hormati privasi member.
      </div>
      <button class="btn-verify ready" onclick="joinDiscord()">ACCEPT & JOIN</button>
      <div onclick="closeModal('rulesModal')" style="margin-top:15px; color:#666; font-size:0.8rem; cursor:pointer;">CLOSE</div>
    </div>
  </div>

  <script>
    // --- 1. ADMIN WHATSAPP ---
    function contactAdmin(){
        window.open('https://wa.me/qr/LSPPA4T7ZGMPH1', '_blank');
    }

    // --- 2. DISCORD JOIN ---
    function joinDiscord(){
        closeModal('rulesModal');
        goto("https://discord.gg/6FMjCyPg");
    }

    // --- 3. MODAL LOGIC ---
    function openModal(id){ 
        const modal = document.getElementById(id);
        if(modal) {
            modal.style.display = 'flex'; 
            const content = modal.querySelector('.modal-content');
            content.style.animation = 'none';
            content.offsetHeight; 
            content.style.animation = 'zoomIn 0.3s ease';
        }
    }
    
    function closeModal(id){ 
        const modal = document.getElementById(id);
        if(modal) modal.style.display = 'none'; 
    }

    // --- 4. GLOBAL LOADER ---
    window.onload = () => {
        setTimeout(() => {
            const loader = document.getElementById('global-loader');
            loader.style.opacity = '0';
            setTimeout(() => { loader.style.display = 'none'; }, 500);
        }, 1500); 
    };

    // --- 5. TRANSISI LINK ---
    function goto(url){
        const loader = document.getElementById('global-loader');
        const msg = document.getElementById('loaderMsg');
        
        loader.style.display = 'flex';
        setTimeout(() => loader.style.opacity = '1', 10);
        msg.innerText = "REDIRECTING...";
        
        setTimeout(() => { window.location.href = url; }, 2000);
    }

    // --- 6. ID CARD SCANNER SYSTEM ---
    let targetLink = ""; 

    function openScanner(url){
        targetLink = url;
        document.getElementById('previewImg').style.display = 'none';
        document.getElementById('scanPlaceholder').style.display = 'block';
        document.getElementById('scanLaser').style.display = 'none';
        document.getElementById('scannerFrame').classList.remove('active');
        document.getElementById('scanName').disabled = true;
        document.getElementById('scanName').value = "";
        
        const btn = document.getElementById('verifyBtn');
        btn.classList.remove('ready');
        btn.innerText = "UPLOAD ID FIRST";
        
        openModal('scanModal');
    }

    function handleImageUpload(event){
        const file = event.target.files[0];
        if(file){
            const reader = new FileReader();
            reader.onload = function(e){
                const img = document.getElementById('previewImg');
                img.src = e.target.result;
                img.style.display = 'block';
                document.getElementById('scanPlaceholder').style.display = 'none';
                
                document.getElementById('scanLaser').style.display = 'block';
                document.getElementById('scannerFrame').classList.add('active');
                
                document.getElementById('scanName').disabled = false;
                document.getElementById('scanName').focus();
                
                const btn = document.getElementById('verifyBtn');
                btn.innerText = "VERIFY ACCESS";
                btn.classList.add('ready');
            }
            reader.readAsDataURL(file);
        }
    }

    // --- 7. FIREBASE VERIFICATION LOGIC ---
    const FIREBASE_URL = "https://iea-pendaftaran-default-rtdb.asia-southeast1.firebasedatabase.app";

    async function processVerification(){
        const btn = document.getElementById('verifyBtn');
        if(!btn.classList.contains('ready')) return; 

        const name = document.getElementById('scanName').value.trim().toLowerCase();
        if(!name) { alert("MASUKKAN NAMA SESUAI ID!"); return; }

        btn.innerText = "SCANNING DATABASE...";
        await new Promise(r => setTimeout(r, 1500));

        try {
            const grups = ["iea_grup_1", "iea_grup_2"];
            let found = false;
            
            for(let g of grups){
                let res = await fetch(`${FIREBASE_URL}/${g}.json`);
                let data = await res.json();
                if(data) {
                    for(let k in data) if(data[k].n && data[k].n.toLowerCase() === name) found = true;
                }
            }

            if(found){
                btn.innerText = "ACCESS GRANTED";
                btn.style.background = "#0aff0a";
                setTimeout(() => {
                    closeModal('scanModal');
                    goto(targetLink);
                }, 800);
            } else {
                alert("ACCESS DENIED: Data tidak ditemukan.");
                btn.innerText = "RETRY";
                btn.style.background = "#ff2a2a";
                btn.style.color = "#fff";
            }
        } catch(e){
            alert("NETWORK ERROR");
            btn.innerText = "RETRY";
        }
    }
  </script>
</body>
    </html>
          
