<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>IEA INTERNATIONAL EDUCATION ASTRONOMY</title>
    <!-- New Fonts (minimal & modern) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;400;600;700&family=Manrope:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
      :root{
        --bg: #040406;
        --card-bg: rgba(255,255,255,0.03);
        --glass-border: rgba(255,255,255,0.08);
        --accent: #00f6ff;
        --muted: rgba(255,255,255,0.6);
        --glass-strong: rgba(255,255,255,0.06);
        --focus: 0 8px 30px rgba(0,246,255,0.06);
        --radius: 18px;
        --maxw: 980px;
      }

      /* reset */
      *{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
      html,body{height:100%}
      body{
        font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        background: linear-gradient(180deg, rgba(2,6,10,1) 0%, rgba(6,6,10,1) 100%);
        color: #fff; -webkit-font-smoothing:antialiased;
        -moz-osx-font-smoothing:grayscale;
        min-height:100vh;
        overflow-x:hidden;
      }

      /* subtle ambient vignette + radial glow */
      .ambient{
        position:fixed; inset:0; pointer-events:none; z-index:0;
        background:
          radial-gradient(600px 300px at 10% 10%, rgba(0,246,255,0.03), transparent 8%),
          radial-gradient(420px 240px at 90% 80%, rgba(0,0,0,0.12), transparent 25%);
        mix-blend-mode:screen;
      }

      /* layout */
      .wrap{max-width:var(--maxw);margin:0 auto;padding:10vh 20px;position:relative;z-index:2}
      header{margin-bottom:72px}
      header p{
        font-family:"Manrope", "Inter";font-weight:700;color:var(--accent);
        letter-spacing:5px;text-transform:uppercase;font-size:0.74rem;margin-bottom:10px;
        opacity:0.95
      }
      header h1{
        font-family:"Manrope";font-size:clamp(1.9rem,7.6vw,2.7rem);font-weight:700;
        letter-spacing:-1px;line-height:1.06;text-transform:uppercase;
      }

      /* grid */
      .grid{
        display:grid; grid-template-columns:1fr; gap:18px;
      }
      @media(min-width:880px){ .grid{ grid-template-columns:repeat(2,1fr); gap:22px } }

      /* card: minimal glass */
      .card{
        background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
        border: 1px solid var(--glass-border);
        border-radius:var(--radius);
        padding:34px;
        backdrop-filter: blur(14px) saturate(1.08);
        -webkit-backdrop-filter: blur(14px) saturate(1.08);
        box-shadow: var(--focus);
        transition: transform .42s cubic-bezier(.2,.9,.3,1), box-shadow .42s;
        cursor:pointer;
        display:flex;flex-direction:column; position:relative; overflow:hidden;
      }
      .card::after{
        content:"";position:absolute;inset:0;border-radius:inherit;
        pointer-events:none;
        background: linear-gradient(180deg, rgba(255,255,255,0.000), rgba(255,255,255,0.01));
      }
      .card span{
        font-family:"Manrope";font-weight:700;letter-spacing:3.5px;font-size:.62rem;color:var(--muted);text-transform:uppercase;margin-bottom:12px;
      }
      .card h2{
        font-family:"Manrope";font-weight:700;font-size:1.35rem;margin-bottom:10px;
      }
      .card p{
        font-family:"Inter";font-weight:300;color:rgba(255,255,255,0.72);line-height:1.6;max-width:480px;font-size:.94rem;
      }
      .card:hover{ transform:translateY(-6px); box-shadow:0 28px 80px rgba(0,0,0,0.6); border-color: rgba(0,246,255,0.14) }

      /* modal */
      .modal{
        position:fixed; inset:0; display:none; place-items:center; z-index:9998; padding:26px;
        background: linear-gradient(180deg, rgba(1,1,2,0.86), rgba(1,1,2,0.94));
      }
      .modal-content{
        width:100%; max-width:520px; border-radius:28px; padding:40px; background:rgba(6,6,6,0.82);
        border:1px solid var(--glass-border); backdrop-filter: blur(18px);
      }
      .modal-content h3{ font-family:"Manrope"; text-align:center;color:var(--accent); margin-bottom:26px; letter-spacing:4px; font-weight:700 }
      .rules-list{ color:rgba(255,255,255,0.78); line-height:1.75; font-size:.92rem }
      .rules-list b{ display:block;color:#fff;margin-top:16px;font-family:"Manrope";font-weight:700 }

      .input-field{
        width:100%; padding:18px 16px; border-radius:14px; border:1px solid var(--glass-border);
        background: rgba(255,255,255,0.017); color:#fff; text-align:center; font-weight:600; outline:none;
      }
      .input-field:focus{ box-shadow:0 6px 24px rgba(0,246,255,0.04); border-color:rgba(0,246,255,0.12) }

      .btn-prime{
        width:100%; padding:16px 18px; border-radius:14px; margin-top:14px; font-weight:900; font-family:"Manrope";
        border:none; cursor:pointer;background:#fff;color:#000;
      }
      .btn-prime:hover{ transform:translateY(-2px) }

      .btn-close{ display:block;text-align:center;margin-top:18px;color:#777;font-size:.72rem;letter-spacing:3px;cursor:pointer;font-weight:700 }

      /* cinematic loader (kept text same) but minimal frame */
      #loader{
        position:fixed; inset:0; display:flex;flex-direction:column;align-items:center;justify-content:center;
        z-index:10000; pointer-events:none; opacity:0; transition:opacity .42s ease;
        background: linear-gradient(180deg, rgba(0,0,0,0.65), rgba(0,0,0,0.65));
        backdrop-filter: blur(6px);
      }
      #loader.active{ opacity:1; pointer-events:all }

      .boot-text{
        font-family:"Manrope";font-weight:700;letter-spacing:7px;color:var(--accent);text-transform:uppercase;font-size:.72rem;
        margin-bottom:16px;
      }

      /* subtle minimal spinner + progress bar */
      .loader-min{
        display:flex;gap:12px;align-items:center;
      }
      .dot{
        width:9px;height:9px;border-radius:50%;background:rgba(255,255,255,0.9);opacity:.08;
        animation: pulse 1.6s linear infinite;
      }
      .dot:nth-child(2){ animation-delay:.12s }
      .dot:nth-child(3){ animation-delay:.24s }
      @keyframes pulse{
        0%{opacity:.08;transform:translateY(0)}
        50%{opacity:1;transform:translateY(-6px)}
        100%{opacity:.08;transform:translateY(0)}
      }

      /* small scan line under loader */
      .scan-line{ width:160px;height:2px;background:linear-gradient(90deg, transparent, var(--accent), transparent); margin-top:18px; border-radius:10px; opacity:.9 }

      /* tiny footer hint (non-intrusive) */
      .hint{ position:fixed; right:18px; bottom:18px; font-family:"Inter"; font-size:.72rem; color:rgba(255,255,255,0.5); z-index:3; }
    </style>
</head>
<body>
  <div class="ambient" aria-hidden="true"></div>

  <!-- Minimal cinematic loader (kept original loader text content intact) -->
  <div id="loader" aria-hidden="true">
    <div class="boot-text" id="bootText">AUTHENTICATING SESSION</div>
    <div class="loader-min" aria-hidden="true">
      <div class="dot" aria-hidden="true"></div>
      <div class="dot" aria-hidden="true"></div>
      <div class="dot" aria-hidden="true"></div>
    </div>
    <div class="scan-line" aria-hidden="true"></div>
  </div>

  <div class="wrap">
    <header>
      <p>IEA</p>
      <h1>INTERNATIONAL EDUCATION ASTRONOMY</h1>
    </header>

    <main>
      <div class="grid">
        <div class="card" onclick="triggerTransition('https://xzam730.github.io/PENDAFTARAN-KOMUNITAS-1/')">
          <span>Gate 1</span>
          <h2>KOMUNITAS 1</h2>
          <p>Pendaftaran resmi gelombang pertama komunitas IEA</p>
        </div>

        <div class="card" onclick="triggerTransition('https://xzam730.github.io/PENDAFTARAN-KOMUNITAS-1/komunitas2.html')">
          <span>Gate 2</span>
          <h2>KOMUNITAS 2</h2>
          <p>Pendaftaran resmi gelombang kedua komunitas IEA</p>
        </div>

        <div class="card" onclick="openModal('loginModal')">
          <span>Secure Core</span>
          <h2>WEBSITE IEA</h2>
          <p>Website IEA memerlukan verifikasi id card</p>
        </div>

        <div class="card" onclick="triggerTransition('https://ai-iea-international-education-astronomy-tvmchu4pnij7avslkygup.streamlit.app/')">
          <span>AI Intelligence</span>
          <h2>AI IEA</h2>
          <p>Terminal cerdas untuk diskusi ilmiah astronomi.</p>
        </div>

        <div class="card" onclick="openModal('rulesModal')">
          <span>Social Hub</span>
          <h2>DISCORD IEA</h2>
          <p>Komunitas diskusi real-time. Harap baca aturan sebelum bergabung.</p>
        </div>
      </div>
    </main>
  </div>

  <div id="loginModal" class="modal" aria-hidden="true">
    <div class="modal-content">
      <h3>SECURE ACCESS</h3>
      <input type="text" id="userName" class="input-field" placeholder="ENTER REGISTERED NAME" />
      <button class="btn-prime" onclick="verifyAccess()">AUTHORIZE</button>
      <span class="btn-close" onclick="closeModal('loginModal')">ABORT MISSION</span>
    </div>
  </div>

  <div id="rulesModal" class="modal" aria-hidden="true">
    <div class="modal-content">
      <h3>RULES & ETHICS</h3>
      <div class="rules-list">
        <b>1. ETIKA DISKUSI</b> Sopan, beradab, fokus pada argumen, bukan serangan personal.
        <b>2. INTEGRITAS</b> Anti hoaks/pseudo-sains. Klaim wajib berbasis data & sumber valid.
        <b>3. ANTI-DOGMATISME</b> Bukan tempat dakwah. Diskusi harus rasional dan dialogis.
        <b>4. KETERTIBAN</b> Dilarang spam/promosi. Ikuti instruksi moderator server.
        <b>5. INKLUSIVITAS</b> Nol toleransi terhadap diskriminasi atau pelecehan.
        <b>6. KONSEKUENSI</b> Pelanggaran berakibat mute/ban. Keputusan admin bersifat final.
        <p style="margin-top:25px; color:var(--accent); text-align:center; font-size:0.75rem; letter-spacing:3px; font-weight:700;">EGO RENDAH, NALAR TINGGI.</p>
      </div>
      <button class="btn-prime" onclick="joinDiscord()" style="margin-top:22px;">I AGREE & JOIN</button>
      <span class="btn-close" onclick="closeModal('rulesModal')">DECLINE</span>
    </div>
  </div>

  <div class="hint" aria-hidden="true">IEA â€” Ego Rendah, Nalar Tinggi.</div>

  <script>
    /* Minimal, robust loader + interactions
       - preserves all text/title unchanged
       - minimal, smooth timing for "alive" feeling
       - every card / link click funnels through loader
    */

    // elements
    const loader = document.getElementById('loader');
    const bootTextElem = document.getElementById('bootText');

    // keep original boot strings intact where used; we may re-use existing text
    const bootStrings = ["INITIALIZING", "SYNCING GATEWAYS", "DECRYPTING CORE", "SYSTEM READY"];
    const outStrings = ["REDIRECTING", "ESTABLISHING LINK", "LEAVING PORTAL", "TRANSFERRING..."];

    // show/hide helper (minimal)
    function showLoader(text){
      if(text) bootTextElem.innerText = text;
      loader.classList.add('active');
      loader.setAttribute('aria-hidden', 'false');
    }
    function hideLoader(delay = 0){
      setTimeout(()=>{
        loader.classList.remove('active');
        loader.setAttribute('aria-hidden', 'true');
      }, delay);
    }

    // initial sequence (subtle & longer)
    (function initBoot(){
      let i=0;
      showLoader(bootStrings[0]);
      const t = setInterval(()=>{
        i++;
        if(i < bootStrings.length) bootTextElem.innerText = bootStrings[i];
        else {
          clearInterval(t);
        }
      }, 680);
      window.addEventListener('load', ()=> {
        // keep loader visible a bit longer to feel intentional
        hideLoader(4200);
      });
    })();

    // ensure all .card clicks go via JS transition (keeps original onclick semantics intact)
    function triggerTransition(url){
      // small random out text for subtle variation
      const text = outStrings[Math.floor(Math.random()*outStrings.length)];
      showLoader(text);
      // short, crisp delay to feel minimal yet real
      setTimeout(()=>{ window.location.href = url }, 1300);
    }

    // modal controls (unchanged copy)
    function openModal(id){ document.getElementById(id).style.display = 'grid'; document.getElementById(id).setAttribute('aria-hidden','false') }
    function closeModal(id){ document.getElementById(id).style.display = 'none'; document.getElementById(id).setAttribute('aria-hidden','true') }

    function joinDiscord(){
      closeModal('rulesModal');
      triggerTransition("https://discord.gg/6FMjCyPg");
    }

    /* FIREBASE verification logic preserved (no wording changed) */
    const FIREBASE_URL = "https://iea-pendaftaran-default-rtdb.asia-southeast1.firebasedatabase.app";
    const TARGET_URL = "https://xzam730.github.io/IEA-Web-premium/";

    async function verifyAccess(){
      const nameInput = document.getElementById('userName').value.trim().toLowerCase();
      if(!nameInput) return;

      const btn = document.querySelector('#loginModal .btn-prime');
      btn.innerText = "VERIFYING...";
      btn.disabled = true;

      showLoader("VERIFYING IDENTITY");

      try{
        const grups = ["iea_grup_1", "iea_grup_2"];
        let found = false;

        for (let grup of grups){
          const res = await fetch(`${FIREBASE_URL}/${grup}.json`);
          const data = await res.json();
          if(data){
            for(let key in data){
              if(data[key].n && data[key].n.toLowerCase() === nameInput){
                found = true; break;
              }
            }
          }
          if(found) break;
        }

        if(found){
          triggerTransition(TARGET_URL);
        } else {
          hideLoader(600);
          alert("Identity not found.");
          btn.innerText = "AUTHORIZE";
          btn.disabled = false;
        }
      } catch(err){
        hideLoader(600);
        alert("Connection failed.");
        btn.innerText = "AUTHORIZE";
        btn.disabled = false;
      }
    }

    /* make native anchors also show loader (non-invasive)
       and add keyboard accessibility for cards
    */
    (function enhance(){
      // intercept real anchor clicks
      document.addEventListener('click', function(e){
        const a = e.target.closest && e.target.closest('a');
        if(!a) return;
        const href = a.getAttribute('href');
        if(!href || href.startsWith('#')) return;
        e.preventDefault();
        showLoader("REDIRECTING");
        setTimeout(()=>{ window.location.href = href }, 900);
      }, true);

      // keyboard accessibility for .card (Enter to trigger)
      document.querySelectorAll('.card').forEach(card=>{
        card.setAttribute('tabindex','0');
        card.addEventListener('keydown', function(ev){ if(ev.key === 'Enter') card.click() });
      });
    })();
  </script>
</body>
    </html>
